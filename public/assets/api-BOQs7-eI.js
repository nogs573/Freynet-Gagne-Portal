import{cl as q,at as P}from"./main-BaC4daP5.js";const $=/#/g,j=/&/g,L=/\//g,O=/=/g,b=/\+/g,U=/%5e/gi,N=/%60/gi,Q=/%7c/gi,F=/%20/gi;function H(e){return encodeURI(""+e).replace(Q,"|")}function m(e){return H(typeof e=="string"?e:JSON.stringify(e)).replace(b,"%2B").replace(F,"+").replace($,"%23").replace(j,"%26").replace(N,"`").replace(U,"^").replace(L,"%2F")}function d(e){return m(e).replace(O,"%3D")}function w(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function k(e){return w(e.replace(b," "))}function I(e){return w(e.replace(b," "))}function B(e=""){const o={};e[0]==="?"&&(e=e.slice(1));for(const r of e.split("&")){const n=r.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const a=k(n[1]);if(a==="__proto__"||a==="constructor")continue;const i=I(n[2]||"");o[a]===void 0?o[a]=i:Array.isArray(o[a])?o[a].push(i):o[a]=[o[a],i]}return o}function D(e,o){return(typeof o=="number"||typeof o=="boolean")&&(o=String(o)),o?Array.isArray(o)?o.map(r=>`${d(e)}=${m(r)}`).join("&"):`${d(e)}=${m(o)}`:d(e)}function J(e){return Object.keys(e).filter(o=>e[o]!==void 0).map(o=>D(o,e[o])).filter(Boolean).join("&")}const M=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,G=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,K=/^([/\\]\s*){2,}[^/\\]/,W=/^\.?\//;function T(e,o={}){return typeof o=="boolean"&&(o={acceptRelative:o}),o.strict?M.test(e):G.test(e)||(o.acceptRelative?K.test(e):!1)}function z(e="",o){return e.endsWith("/")}function V(e="",o){return(z(e)?e.slice(0,-1):e)||"/"}function X(e="",o){return e.endsWith("/")?e:e+"/"}function Z(e,o){if(Y(o)||T(e))return e;const r=V(o);return e.startsWith(r)?e:ee(r,e)}function v(e,o){const r=oe(e),n={...B(r.search),...o};return r.search=J(n),te(r)}function Y(e){return!e||e==="/"}function x(e){return e&&e!=="/"}function ee(e,...o){let r=e||"";for(const n of o.filter(a=>x(a)))if(r){const a=n.replace(W,"");r=X(r)+a}else r=n;return r}const _=Symbol.for("ufo:protocolRelative");function oe(e="",o){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,c,u=""]=r;return{protocol:c.toLowerCase(),pathname:u,href:c+u,auth:"",host:"",search:"",hash:""}}if(!T(e,{acceptRelative:!0}))return g(e);const[,n="",a,i=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,h="",s=""]=i.match(/([^#/?]*)(.*)?/)||[];n==="file:"&&(s=s.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:f,search:p,hash:t}=g(s);return{protocol:n.toLowerCase(),auth:a?a.slice(0,Math.max(0,a.length-1)):"",host:h,pathname:f,search:p,hash:t,[_]:!n}}function g(e=""){const[o="",r="",n=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:o,search:r,hash:n}}function te(e){const o=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",n=e.hash||"",a=e.auth?e.auth+"@":"",i=e.host||"";return(e.protocol||e[_]?(e.protocol||"")+"//":"")+a+i+o+r+n}class re extends Error{constructor(o,r){super(o,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}}function se(e){var f,p,t,c,u;const o=((f=e.error)==null?void 0:f.message)||((p=e.error)==null?void 0:p.toString())||"",r=((t=e.request)==null?void 0:t.method)||((c=e.options)==null?void 0:c.method)||"GET",n=((u=e.request)==null?void 0:u.url)||String(e.request)||"/",a=`[${r}] ${JSON.stringify(n)}`,i=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",h=`${a}: ${i}${o?` ${o}`:""}`,s=new re(h,e.error?{cause:e.error}:void 0);for(const l of["request","options","response"])Object.defineProperty(s,l,{get(){return e[l]}});for(const[l,y]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(s,l,{get(){return e.response&&e.response[y]}});return s}const ne=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function R(e="GET"){return ne.has(e.toUpperCase())}function ae(e){if(e===void 0)return!1;const o=typeof e;return o==="string"||o==="number"||o==="boolean"||o===null?!0:o!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const ie=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ce=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function pe(e=""){if(!e)return"json";const o=e.split(";").shift()||"";return ce.test(o)?"json":ie.has(o)||o.startsWith("text/")?"text":"blob"}function fe(e,o,r=globalThis.Headers){const n={...o,...e};if(o!=null&&o.params&&(e!=null&&e.params)&&(n.params={...o==null?void 0:o.params,...e==null?void 0:e.params}),o!=null&&o.query&&(e!=null&&e.query)&&(n.query={...o==null?void 0:o.query,...e==null?void 0:e.query}),o!=null&&o.headers&&(e!=null&&e.headers)){n.headers=new r((o==null?void 0:o.headers)||{});for(const[a,i]of new r((e==null?void 0:e.headers)||{}))n.headers.set(a,i)}return n}const he=new Set([408,409,425,429,500,502,503,504]),ue=new Set([101,204,205,304]);function A(e={}){const{fetch:o=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:n=globalThis.AbortController}=e;async function a(s){const f=s.error&&s.error.name==="AbortError"&&!s.options.timeout||!1;if(s.options.retry!==!1&&!f){let t;typeof s.options.retry=="number"?t=s.options.retry:t=R(s.options.method)?0:1;const c=s.response&&s.response.status||500;if(t>0&&(Array.isArray(s.options.retryStatusCodes)?s.options.retryStatusCodes.includes(c):he.has(c))){const u=s.options.retryDelay||0;return u>0&&await new Promise(l=>setTimeout(l,u)),i(s.request,{...s.options,retry:t-1})}}const p=se(s);throw Error.captureStackTrace&&Error.captureStackTrace(p,i),p}const i=async function(f,p={}){var l;const t={request:f,options:fe(p,e.defaults,r),response:void 0,error:void 0};t.options.method=(l=t.options.method)==null?void 0:l.toUpperCase(),t.options.onRequest&&await t.options.onRequest(t),typeof t.request=="string"&&(t.options.baseURL&&(t.request=Z(t.request,t.options.baseURL)),(t.options.query||t.options.params)&&(t.request=v(t.request,{...t.options.params,...t.options.query}))),t.options.body&&R(t.options.method)&&(ae(t.options.body)?(t.options.body=typeof t.options.body=="string"?t.options.body:JSON.stringify(t.options.body),t.options.headers=new r(t.options.headers||{}),t.options.headers.has("content-type")||t.options.headers.set("content-type","application/json"),t.options.headers.has("accept")||t.options.headers.set("accept","application/json")):("pipeTo"in t.options.body&&typeof t.options.body.pipeTo=="function"||typeof t.options.body.pipe=="function")&&("duplex"in t.options||(t.options.duplex="half")));let c;if(!t.options.signal&&t.options.timeout){const y=new n;c=setTimeout(()=>y.abort(),t.options.timeout),t.options.signal=y.signal}try{t.response=await o(t.request,t.options)}catch(y){return t.error=y,t.options.onRequestError&&await t.options.onRequestError(t),await a(t)}finally{c&&clearTimeout(c)}if(t.response.body&&!ue.has(t.response.status)&&t.options.method!=="HEAD"){const y=(t.options.parseResponse?"json":t.options.responseType)||pe(t.response.headers.get("content-type")||"");switch(y){case"json":{const S=await t.response.text(),C=t.options.parseResponse||q;t.response._data=C(S);break}case"stream":{t.response._data=t.response.body;break}default:t.response._data=await t.response[y]()}}return t.options.onResponse&&await t.options.onResponse(t),!t.options.ignoreResponseError&&t.response.status>=400&&t.response.status<600?(t.options.onResponseError&&await t.options.onResponseError(t),await a(t)):t.response},h=async function(f,p){return(await i(f,p))._data};return h.raw=i,h.native=(...s)=>o(...s),h.create=(s={})=>A({...e,defaults:{...e.defaults,...s}}),h}const E=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),le=E.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),ye=E.Headers,de=E.AbortController,me=A({fetch:le,Headers:ye,AbortController:de}),Ee=me.create({baseURL:"https://stephandouglasduval.com/api",async onRequest({options:e}){const o=P("accessToken").value;o&&(e.headers={...e.headers,Authorization:`Bearer ${o}`})}});export{Ee as $};
