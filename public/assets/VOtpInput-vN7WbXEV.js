import{m as j,V as q}from"./VField-CelNtUMo.js";import{V as L}from"./VOverlay-BFLsqd3w.js";import{b1 as M,bw as T,cM as K,b8 as z,bF as Z,bj as $,bb as E,Z as r,r as p,bM as G,w as h,be as H,al as J,c8 as Q,b as s,F as U,q as V,ay as W,bp as k}from"./main-BaC4daP5.js";import{m as X,u as Y}from"./form-Bx6DrHT2.js";const ee=M({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...T(),...X(),...K(j({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),ue=z()({name:"VOtpInput",props:ee(),emits:{finish:t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,F){let{attrs:x,emit:A,slots:d}=F;const{dimensionStyles:w}=Z(t),{isFocused:y,focus:P,blur:D}=Y(t),o=$(t,"modelValue","",e=>e==null?[]:String(e).split(""),e=>e.join("")),{t:_}=E(),f=r(()=>Number(t.length)),C=r(()=>Array(f.value).fill(0)),i=p(-1),m=p(),c=p([]),b=r(()=>c.value[i.value]);function I(){if(g(b.value.value)){b.value.value="";return}const e=o.value.slice(),l=b.value.value;e[i.value]=l;let n=null;i.value>o.value.length?n=o.value.length+1:i.value+1!==f.value&&(n="next"),o.value=e,n&&k(m.value,n)}function S(e){const l=o.value.slice(),n=i.value;let u=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(e.key)&&(e.preventDefault(),e.key==="ArrowLeft"?u="prev":e.key==="ArrowRight"?u="next":["Backspace","Delete"].includes(e.key)&&(l[i.value]="",o.value=l,i.value>0&&e.key==="Backspace"?u="prev":requestAnimationFrame(()=>{var a;(a=c.value[n])==null||a.select()})),requestAnimationFrame(()=>{u!=null&&k(m.value,u)}))}function B(e,l){var u,a;l.preventDefault(),l.stopPropagation();const n=((u=l==null?void 0:l.clipboardData)==null?void 0:u.getData("Text"))??"";g(n)||(o.value=n.split(""),(a=c.value)==null||a[e].blur())}function N(){o.value=[]}function O(e,l){P(),i.value=l}function R(){D(),i.value=-1}function g(e){return t.type==="number"&&/[^0-9]/g.test(e)}return G({VField:{color:r(()=>t.color),bgColor:r(()=>t.color),baseColor:r(()=>t.baseColor),disabled:r(()=>t.disabled),error:r(()=>t.error),variant:r(()=>t.variant)}},{scoped:!0}),h(o,e=>{e.length===f.value&&A("finish",e.join(""))},{deep:!0}),h(i,e=>{e<0||J(()=>{var l;(l=c.value[e])==null||l.select()})}),H(()=>{var n;const[e,l]=Q(x);return s("div",V({class:["v-otp-input",{"v-otp-input--divided":!!t.divider},t.class],style:[t.style]},e),[s("div",{ref:m,class:"v-otp-input__content",style:[w.value]},[C.value.map((u,a)=>s(U,null,[t.divider&&a!==0&&s("span",{class:"v-otp-input__divider"},[t.divider]),s(q,{focused:y.value&&t.focusAll||i.value===a,key:a},{...d,loader:void 0,default:()=>s("input",{ref:v=>c.value[a]=v,"aria-label":_(t.label,a+1),autofocus:a===0&&t.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:t.disabled,inputmode:t.type==="number"?"numeric":"text",min:t.type==="number"?0:void 0,maxlength:"1",placeholder:t.placeholder,type:t.type==="number"?"text":t.type,value:o.value[a],onInput:I,onFocus:v=>O(v,a),onBlur:R,onKeydown:S,onPaste:v=>B(a,v)},null)})])),s("input",V({class:"v-otp-input-input",type:"hidden"},l,{value:o.value.join("")}),null),s(L,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!t.loading,persistent:!0},{default:()=>{var u;return[((u=d.loader)==null?void 0:u.call(d))??s(W,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(n=d.default)==null?void 0:n.call(d)])])}),{blur:()=>{var e;(e=c.value)==null||e.some(l=>l.blur())},focus:()=>{var e;(e=c.value)==null||e[0].focus()},reset:N,isFocused:y}}});export{ue as V};
