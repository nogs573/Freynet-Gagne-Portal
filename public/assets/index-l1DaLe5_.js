import{f as De}from"./formatters-Cw2xOObF.js";import{d as se,r as g,o as p,g as R,f as t,b as e,e as l,n as a,ah as O,c as y,y as j,av as ve,t as v,ag as ee,a2 as u,a as ie,w as he,Z as q,F as A,i as F,x as G,v as b,j as be,I as W,J as Z,am as J,aw as Te,H as Me}from"./main-Ca4qx7y-.js";import{P as ue}from"./vue3-perfect-scrollbar.esm-CLCcbP0n.js";import{_ as ge}from"./TiptapEditor.vue_vue_type_style_index_0_lang-CPrxlDT2.js";import{V as K}from"./VSpacer-BgKUyuZ2.js";import{V as Q}from"./VCardText-iX3erHMv.js";import{V as X}from"./VTextField-DA7n0c0j.js";import{V as P}from"./VDivider-CMgOCZ_h.js";import{V as Y}from"./VCard-k3dQT3Up.js";import{V as ye}from"./VChip-BPUxCjj5.js";import{$ as xe}from"./api-BzNVkqIw.js";import{V as N}from"./VTooltip-DaUsn1KG.js";import{V as te}from"./VMenu-BXWqdo-4.js";import{V as ae,a as le,b as oe}from"./VList-P5iFN8Pn.js";import{V as $e}from"./VAvatar-B3k1LwfD.js";import{V as de}from"./VImg-C3GobFkp.js";import{V as ke}from"./VNavigationDrawer-BW4FC1x1.js";import{V as Ce}from"./VBadge-FTnu-L8s.js";import{u as Ae,V as Re,a as Ue}from"./VMain-ClZ19mNo.js";import{u as Be}from"./useApi-CB9ZStik.js";import{c as Ie}from"./createUrl-3fObgvGv.js";import{V as _e}from"./VCheckbox-CL6WmZlr.js";import"./helpers-DK5QwNv0.js";import"./index-CtHxxxpF.js";import"./index-Dn4mgnO1.js";/* empty css              *//* empty css                   */import"./VCounter-DbxmW7Y4.js";import"./VField-ZOdg6ueh.js";import"./form-C6PetfES.js";import"./easing-CjukEv2V.js";import"./VInput-iEBwr0fp.js";import"./forwardRefs-C-GTDzx5.js";import"./VSlideGroup-DbGP5EjM.js";import"./VOverlay-C-c1GQAd.js";import"./delay-DDujfhaz.js";import"./lazy-He9qliih.js";import"./scopeId-B0kCZn--.js";import"./dialog-transition-ianbTZuP.js";import"./ssrBoot-WXvDeQ_A.js";import"./index-CeW1uQ0r.js";import"./VCheckboxBtn-IHz41y0p.js";import"./VSelectionControl-CJpIFID9.js";const Ne={class:"d-flex align-center"},Fe=l("h5",{class:"text-h5 text-medium-emphasis"}," Compose Mail ",-1),Pe={class:"d-flex align-center gap-x-2"},Oe={class:"px-1 pe-6 py-1"},je=l("div",{class:"text-base font-weight-medium text-disabled"}," To: ",-1),He={class:"cursor-pointer text-body-1"},qe=l("span",null," | ",-1),Je={key:0},We={class:"px-1 pe-6 py-1"},Ze=l("div",{class:"text-disabled font-weight-medium"}," Cc: ",-1),Ge={key:0},Ke={class:"px-1 pe-6 py-1"},Qe=l("div",{class:"text-disabled font-weight-medium"}," Bcc: ",-1),Xe={class:"px-1 pe-6 py-1"},Ye=l("div",{class:"text-base font-weight-medium text-disabled"}," Subject: ",-1),et={class:"d-flex align-center px-6 py-4"},tt=se({__name:"ComposeDialog",emits:["close"],setup(D){const V=g(""),d=g(""),w=g(""),$=g(""),z=g(""),S=g(""),U=g(!1),n=g(!1),E=()=>{d.value=w.value=$.value=""};return(_,i)=>{const L=ie("IconBtn"),T=ge;return p(),R(Y,{class:"email-compose-dialog","max-width":"30vw"},{default:t(()=>[e(Q,{class:"py-3 px-6",style:{"background-color":"rgba(var(--v-theme-on-surface), var(--v-hover-opacity))"}},{default:t(()=>[l("div",Ne,[Fe,e(K),l("div",Pe,[e(L,{size:"small",icon:"bx-minus",onClick:i[0]||(i[0]=c=>_.$emit("close"))}),e(L,{size:"small",icon:"bx-x",onClick:i[1]||(i[1]=c=>{_.$emit("close"),E()})})])])]),_:1}),l("div",Oe,[e(X,{modelValue:a(d),"onUpdate:modelValue":i[4]||(i[4]=c=>O(d)?d.value=c:null),density:"compact"},{"prepend-inner":t(()=>[je]),append:t(()=>[l("span",He,[l("span",{onClick:i[2]||(i[2]=c=>U.value=!a(U))},"Cc"),qe,l("span",{onClick:i[3]||(i[3]=c=>n.value=!a(n))},"Bcc")])]),_:1},8,["modelValue"])]),e(ve,null,{default:t(()=>[a(U)?(p(),y("div",Je,[e(P),l("div",We,[e(X,{modelValue:a(z),"onUpdate:modelValue":i[5]||(i[5]=c=>O(z)?z.value=c:null),density:"compact"},{"prepend-inner":t(()=>[Ze]),_:1},8,["modelValue"])])])):j("",!0)]),_:1}),e(ve,null,{default:t(()=>[a(n)?(p(),y("div",Ge,[e(P),l("div",Ke,[e(X,{modelValue:a(S),"onUpdate:modelValue":i[6]||(i[6]=c=>O(S)?S.value=c:null),density:"compact"},{"prepend-inner":t(()=>[Qe]),_:1},8,["modelValue"])])])):j("",!0)]),_:1}),e(P),l("div",Xe,[e(X,{modelValue:a(w),"onUpdate:modelValue":i[7]||(i[7]=c=>O(w)?w.value=c:null),density:"compact"},{"prepend-inner":t(()=>[Ye]),_:1},8,["modelValue"])]),e(P),e(T,{modelValue:a(V),"onUpdate:modelValue":i[8]||(i[8]=c=>O(V)?V.value=c:null),placeholder:"Message"},null,8,["modelValue"]),l("div",et,[e(ee,{color:"primary",class:"me-4","append-icon":"bx-paper-plane",disabled:a(d)==="",onClick:i[9]||(i[9]=c=>{_.$emit("close"),V.value="",E()})},{default:t(()=>[v(" send ")]),_:1},8,["disabled"]),e(L,{size:"small"},{default:t(()=>[e(u,{icon:"bx-paperclip"})]),_:1}),e(K),e(L,{size:"small",class:"me-2"},{default:t(()=>[e(u,{icon:"bx-dots-vertical-rounded"})]),_:1}),e(L,{size:"small",onClick:i[10]||(i[10]=c=>{_.$emit("close"),E(),V.value=""})},{default:t(()=>[e(u,{icon:"bx-trash"})]),_:1})])]),_:1})}}}),at={class:"d-flex flex-column h-100"},lt={class:"pa-6"},ot={class:"email-filters py-4"},st=["onClick"],it={key:0},nt=l("div",{class:"text-caption text-disabled"}," LABELS ",-1),rt={class:"email-labels"},dt=["onClick"],ct=se({inheritAttrs:!1,__name:"EmailLeftSidebarContent",props:{emailsMeta:{}},emits:["toggleComposeDialogVisibility"],setup(D){const V=D,d=g(0),w=g(0),$=g(0),z=g(0);he(()=>V.emailsMeta,n=>{d.value=(n==null?void 0:n.inbox)??0,w.value=(n==null?void 0:n.draft)??0,$.value=(n==null?void 0:n.spam)??0,z.value=(n==null?void 0:n.star)??0},{immediate:!0,deep:!0});const S=q(()=>[{title:"Inbox",prependIcon:"bx-envelope",to:{name:"apps-email"},badge:{content:d.value,color:"primary"}},{title:"Draft",prependIcon:"bx-edit",to:{name:"apps-email-filter",params:{filter:"draft"}},badge:{content:w.value,color:"warning"}},{title:"Starred",prependIcon:"bx-star",to:{name:"apps-email-filter",params:{filter:"starred"}},badge:{content:z.value,color:"success"}},{title:"Spam",prependIcon:"bx-error-alt",to:{name:"apps-email-filter",params:{filter:"spam"}},badge:{content:$.value,color:"error"}}]),U=g([{title:"Personal",color:"success",to:{name:"apps-email-label",params:{label:"personal"}}},{title:"Company",color:"primary",to:{name:"apps-email-label",params:{label:"company"}}},{title:"Important",color:"warning",to:{name:"apps-email-label",params:{label:"important"}}},{title:"Private",color:"error",to:{name:"apps-email-label",params:{label:"private"}}}]);return(n,E)=>{const _=ie("RouterLink");return p(),y("div",at,[l("div",lt,[e(ee,{block:"",onClick:E[0]||(E[0]=i=>n.$emit("toggleComposeDialogVisibility"))},{default:t(()=>[v(" Compose ")]),_:1})]),e(a(ue),{class:"h-100",options:{wheelPropagation:!1}},{default:t(()=>[l("ul",ot,[(p(!0),y(A,null,F(S.value,i=>(p(),y("li",{key:i.title},[e(_,{to:i.to,custom:""},{default:t(({isActive:L,navigate:T})=>[l("div",{class:G({"email-filter-active":L}),onClick:T},[e(u,{icon:i.prependIcon},null,8,["icon"]),v(" "+b(i.title)+" ",1),i.badge.content?(p(),R(ye,{key:0,color:i.badge.color},{default:t(()=>[v(b(i.badge.content),1)]),_:2},1032,["color"])):j("",!0)],10,st)]),_:2},1032,["to"])]))),128))]),U.value.length?(p(),y("div",it,[nt,l("ul",rt,[(p(!0),y(A,null,F(U.value,i=>(p(),y("li",{key:i.title},[e(_,{to:i.to,custom:""},{default:t(({isActive:L,navigate:T})=>[l("div",{class:G({"email-label-active":L}),onClick:T},[e(u,{icon:"bx-bxs-circle",color:i.color},null,8,["color"]),v(" "+b(i.title),1)],10,dt)]),_:2},1032,["to"])]))),128))])])):j("",!0)]),_:1})])}}}),ce=()=>{const D=be(),V=async(n,E)=>{await xe("apps/email",{method:"POST",body:JSON.stringify({ids:n,data:E})})};return{labels:[{title:"personal",color:"success"},{title:"company",color:"primary"},{title:"important",color:"warning"},{title:"private",color:"error"}],resolveLabelColor:n=>n==="personal"?"success":n==="company"?"primary":n==="important"?"warning":n==="private"?"error":"secondary",shallShowMoveToActionFor:n=>n==="trash"?D.params.filter!=="trashed":n==="inbox"?!(D.params.filter===void 0||D.params.filter==="sent"||D.params.filter==="draft"):n==="spam"?!(D.params.filter==="spam"||D.params.filter==="sent"||D.params.filter==="draft"):!1,emailMoveToFolderActions:[{action:"inbox",icon:"bx-mail"},{action:"spam",icon:"bx-error-alt"},{action:"trash",icon:"bx-trash"}],moveSelectedEmailTo:async(n,E)=>{const _={};n==="inbox"?(D.params.filter==="trashed"&&(_.isDeleted=!1),_.folder="inbox"):n==="spam"?(D.params.filter==="trashed"&&(_.isDeleted=!1),_.folder="spam"):n==="trash"&&(_.isDeleted=!0),await V(E,_)},updateEmails:V,updateEmailLabels:async(n,E)=>{await xe("/apps/email",{method:"POST",body:{ids:n,label:E}})}}},ut={class:"email-view-header d-flex align-center px-6 py-4"},pt={class:"d-flex align-center flex-wrap flex-grow-1 overflow-hidden gap-2"},mt={class:"text-body-1 text-high-emphasis text-truncate"},ft={class:"d-flex flex-wrap gap-2"},vt={class:"d-flex align-center gap-1"},xt={class:"email-view-action-bar d-flex align-center text-medium-emphasis ps-6 pe-4 gap-x-1"},_t={class:"d-flex align-center gap-x-1"},ht={class:"d-flex align-start align-sm-center pa-6 gap-x-4"},bt={class:"d-flex flex-wrap flex-grow-1 overflow-hidden"},gt={class:"text-truncate"},yt={class:"text-body-1 font-weight-medium text-high-emphasis text-truncate"},$t={class:"text-sm"},kt={class:"d-flex align-center gap-x-4"},Ct={class:"text-disabled text-base"},Vt={class:"text-body-1 font-weight-medium text-truncate mb-4"},wt=["innerHTML"],Et=l("span",null,"2 Attachments",-1),zt={class:"text-base"},St=l("span",{class:"text-primary cursor-pointer"}," Forward ",-1),Lt={class:"text-body-1 text-high-emphasis mb-6"},Dt={class:"d-flex justify-end gap-4 pt-2 flex-wrap"},Tt=se({__name:"EmailView",props:{email:{},emailMeta:{}},emits:["refresh","navigated","close","trash","unread","read","star","unstar"],setup(D,{emit:V}){const d=D,w=V,$=g(""),z=g(!1),S=g(!0),{updateEmailLabels:U}=ce(),{labels:n,resolveLabelColor:E,emailMoveToFolderActions:_,shallShowMoveToActionFor:i,moveSelectedEmailTo:L}=ce(),T=async C=>{await L(C,[d.email.id]),w("refresh"),w("close")},c=async C=>{await U([d.email.id],C),w("refresh")};return(C,x)=>{const f=ie("IconBtn"),ne=ge;return p(),R(ke,{temporary:"","model-value":!!d.email,location:"right",scrim:!1,floating:"",class:"email-view"},{default:t(()=>[d.email?(p(),y(A,{key:0},[l("div",ut,[e(f,{class:"me-2",onClick:x[0]||(x[0]=m=>{C.$emit("close"),z.value=!1,S.value=!0,$.value=""})},{default:t(()=>[e(u,{size:"22",icon:"bx-chevron-left",class:"flip-in-rtl text-medium-emphasis"})]),_:1}),l("div",pt,[l("div",mt,b(d.email.subject),1),l("div",ft,[(p(!0),y(A,null,F(d.email.labels,m=>(p(),R(ye,{key:m,color:a(E)(m),class:"text-capitalize flex-shrink-0",size:"small"},{default:t(()=>[v(b(m),1)]),_:2},1032,["color"]))),128))])]),l("div",null,[l("div",vt,[e(f,{disabled:!d.emailMeta.hasPreviousEmail,onClick:x[1]||(x[1]=m=>C.$emit("navigated","previous"))},{default:t(()=>[e(u,{icon:"bx-chevron-left",class:"flip-in-rtl text-medium-emphasis"})]),_:1},8,["disabled"]),e(f,{disabled:!d.emailMeta.hasNextEmail,onClick:x[2]||(x[2]=m=>C.$emit("navigated","next"))},{default:t(()=>[e(u,{icon:"bx-chevron-right",class:"flip-in-rtl text-medium-emphasis"})]),_:1},8,["disabled"])])])]),e(P),l("div",xt,[W(e(f,{onClick:x[3]||(x[3]=m=>{C.$emit("trash"),C.$emit("close")})},{default:t(()=>[e(u,{icon:"bx-trash",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Delete Mail ")]),_:1})]),_:1},512),[[Z,!d.email.isDeleted]]),e(f,{onClick:x[4]||(x[4]=J(m=>{C.$emit("unread"),C.$emit("close")},["stop"]))},{default:t(()=>[e(u,{icon:"bx-envelope",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Mark as Unread ")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,{icon:"bx-folder",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Move to ")]),_:1}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(p(!0),y(A,null,F(a(_),m=>(p(),R(le,{key:m.title,class:G([a(i)(m.action)?"d-flex":"d-none","align-center"]),href:"#",onClick:B=>T(m.action)},{prepend:t(()=>[e(u,{icon:m.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(oe,{class:"text-capitalize"},{default:t(()=>[v(b(m.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,{icon:"bx-label",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Label ")]),_:1}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(p(!0),y(A,null,F(a(n),m=>(p(),R(le,{key:m.title,href:"#",onClick:J(B=>c(m.title),["stop"])},{prepend:t(()=>[e(Ce,{inline:"",color:a(E)(m.title),dot:""},null,8,["color"])]),default:t(()=>[e(oe,{class:"ms-2 text-capitalize"},{default:t(()=>[v(b(m.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(K),l("div",_t,[e(f,{color:d.email.isStarred?"warning":"default",onClick:x[5]||(x[5]=m=>{var B;(B=d.email)!=null&&B.isStarred?C.$emit("unstar"):C.$emit("star"),C.$emit("refresh")})},{default:t(()=>[e(u,{icon:d.email.isStarred?"bx-bxs-star":"bx-star",size:"22"},null,8,["icon"])]),_:1},8,["color"]),e(f,null,{default:t(()=>[e(u,{icon:"bx-dots-vertical-rounded",size:"22"})]),_:1})])]),e(P),e(a(ue),{tag:"div",class:"mail-content-container flex-grow-1 pa-sm-12 pa-6",options:{wheelPropagation:!1}},{default:t(()=>[e(Y,{class:"mb-4"},{default:t(()=>[l("div",ht,[e($e,{size:"38"},{default:t(()=>[e(de,{src:d.email.from.avatar,alt:d.email.from.name},null,8,["src","alt"])]),_:1}),l("div",bt,[l("div",gt,[l("div",yt,b(d.email.from.name),1),l("div",$t,b(d.email.from.email),1)]),e(K),l("div",kt,[l("div",Ct,b(new Date(d.email.time).toDateString()),1),l("div",null,[W(e(f,null,{default:t(()=>[e(u,{icon:"bx-paperclip",size:"22"})]),_:1},512),[[Z,d.email.attachments.length]]),e(f,null,{default:t(()=>[e(u,{icon:"bx-dots-vertical-rounded",size:"22"})]),_:1})])])])]),e(P),e(Q,null,{default:t(()=>[l("div",Vt,b(d.email.from.name)+", ",1),l("div",{class:"text-base",innerHTML:d.email.message},null,8,wt)]),_:1}),d.email.attachments.length?(p(),y(A,{key:0},[e(P),e(Q,{class:"d-flex flex-column gap-y-4 pt-4"},{default:t(()=>[Et,(p(!0),y(A,null,F(d.email.attachments,m=>(p(),y("div",{key:m.fileName,class:"d-flex align-center"},[e(de,{src:m.thumbnail,alt:m.fileName,"aspect-ratio":"1","max-height":"24","max-width":"24",class:"me-2"},null,8,["src","alt"]),l("span",null,b(m.fileName),1)]))),128))]),_:1})],64)):j("",!0)]),_:1}),W(e(Y,null,{default:t(()=>[e(Q,{class:"font-weight-medium text-high-emphasis"},{default:t(()=>[l("div",zt,[v(" Click here to "),l("span",{class:"text-primary cursor-pointer",onClick:x[6]||(x[6]=m=>{z.value=!a(z),S.value=!a(S)})}," Reply "),v(" or "),St])]),_:1})]),_:1},512),[[Z,a(S)]]),a(z)?(p(),R(Y,{key:0},{default:t(()=>[e(Q,null,{default:t(()=>{var m;return[l("div",Lt," Reply to "+b((m=C.email)==null?void 0:m.from.name),1),e(ne,{modelValue:a($),"onUpdate:modelValue":x[7]||(x[7]=B=>O($)?$.value=B:null),placeholder:"Write your message...","is-divider":!1},null,8,["modelValue"]),l("div",Dt,[e(f,{icon:"bx-trash",onClick:x[8]||(x[8]=B=>{z.value=!a(z),S.value=!a(S),$.value=""})}),e(ee,{variant:"text",color:"secondary"},{prepend:t(()=>[e(u,{icon:"bx-paperclip",color:"secondary",size:"16"})]),default:t(()=>[v(" Attachments ")]),_:1}),e(ee,{"append-icon":"bx-paper-plane"},{default:t(()=>[v(" Send ")]),_:1})])]}),_:1})]),_:1})):j("",!0)]),_:1})],64)):j("",!0)]),_:1},8,["model-value"])}}}),Mt={class:"d-flex align-center"},At={class:"py-2 px-4 d-flex align-center d-flex gap-x-1"},Rt=["onClick"],Ut={class:"text-h6"},Bt={class:"text-body-2 truncate"},It={class:"text-sm text-disabled"},Nt={class:"email-actions d-none"},Ft={class:"py-4 px-5 text-center"},Pt=l("span",{class:"text-high-emphasis"},"No items found.",-1),Ot=[Pt],Ta=se({__name:"index",async setup(D){let V,d;const{isLeftSidebarOpen:w}=Ae(),$=be(),{labels:z,resolveLabelColor:S,emailMoveToFolderActions:U,shallShowMoveToActionFor:n,moveSelectedEmailTo:E,updateEmails:_,updateEmailLabels:i}=ce(),L=g(!1),T=g(""),c=g([]),{data:C,execute:x}=([V,d]=Te(()=>Be(Ie("/apps/email",{query:{q:T,filter:()=>"filter"in $.params?$.params.filter:void 0,label:()=>"label"in $.params?$.params.label:void 0}}))),V=await V,d(),V),f=q(()=>{var r;return((r=C.value)==null?void 0:r.emails)||[]}),ne=q(()=>{var r;return((r=C.value)==null?void 0:r.emailsMeta)||{}}),m=r=>{const s=c.value.indexOf(r);s===-1?c.value.push(r):c.value.splice(s,1)},B=q(()=>f.value.length&&f.value.length===c.value.length),pe=q(()=>!!c.value.length&&f.value.length!==c.value.length),re=q(()=>c.value.every(r=>{var s;return(s=f.value.find(k=>k.id===r))==null?void 0:s.isRead})),Ve=()=>{c.value=B.value?[]:f.value.map(r=>r.id)},h=g(null),we=q(()=>{const r={hasNextEmail:!1,hasPreviousEmail:!1};if(h.value){const s=f.value.findIndex(k=>{var o;return k.id===((o=h.value)==null?void 0:o.id)});r.hasNextEmail=!!f.value[s+1],r.hasPreviousEmail=!!f.value[s-1]}return r}),me=async()=>{await x(),h.value&&(h.value=f.value.find(r=>{var s;return r.id===((s=h.value)==null?void 0:s.id)}))},M=async(r,s=c.value)=>{c.value=[],c.value=[],s.length&&(r==="trash"?await _(s,{isDeleted:!0}):r==="spam"?await _(s,{folder:"spam"}):r==="unread"?await _(s,{isRead:!1}):r==="read"?await _(s,{isRead:!0}):r==="star"?await _(s,{isStarred:!0}):r==="unstar"&&await _(s,{isStarred:!1}),h.value?me():await x())},Ee=async r=>{await E(r,c.value),await x()},ze=async r=>{await i(c.value,r),await x()},Se=r=>{if(!h.value)return;const s=f.value.findIndex(o=>{var H;return o.id===((H=h.value)==null?void 0:H.id)}),k=r==="previous"?s-1:s+1;k>=0&&k<f.value.length&&(h.value=f.value[k])},Le=async r=>{h.value=r,await M("read",[r.id])};return he(()=>$.params,()=>{c.value=[]},{deep:!0}),(r,s)=>{const k=ie("IconBtn");return p(),R(Ue,{style:{"min-block-size":"100%"},class:"email-app-layout"},{default:t(()=>[e(ke,{modelValue:a(w),"onUpdate:modelValue":s[1]||(s[1]=o=>O(w)?w.value=o:null),absolute:"",touchless:"",location:"start",temporary:r.$vuetify.display.mdAndDown},{default:t(()=>[e(ct,{"emails-meta":a(ne),onToggleComposeDialogVisibility:s[0]||(s[0]=o=>L.value=!a(L))},null,8,["emails-meta"])]),_:1},8,["modelValue","temporary"]),e(Tt,{email:a(h),"email-meta":a(we),onRefresh:me,onNavigated:Se,onClose:s[2]||(s[2]=o=>h.value=null),onTrash:s[3]||(s[3]=o=>M("trash",a(h)?[a(h).id]:[])),onUnread:s[4]||(s[4]=o=>M("unread",a(h)?[a(h).id]:[])),onStar:s[5]||(s[5]=o=>M("star",a(h)?[a(h).id]:[])),onUnstar:s[6]||(s[6]=o=>M("unstar",a(h)?[a(h).id]:[]))},null,8,["email","email-meta"]),e(Re,null,{default:t(()=>[e(Y,{flat:"",class:"email-content-list h-100 d-flex flex-column"},{default:t(()=>[l("div",Mt,[e(k,{class:"d-lg-none ms-3",onClick:s[7]||(s[7]=o=>w.value=!0)},{default:t(()=>[e(u,{icon:"bx-menu"})]),_:1}),e(X,{modelValue:a(T),"onUpdate:modelValue":s[8]||(s[8]=o=>O(T)?T.value=o:null),density:"default",class:"email-search px-sm-2 flex-grow-1 py-1",placeholder:"Search mail"},{"prepend-inner":t(()=>[e(u,{icon:"bx-search",size:"22",class:"me-2 text-medium-emphasis"})]),_:1},8,["modelValue"])]),e(P),l("div",At,[e(_e,{"model-value":a(B),indeterminate:a(pe),class:"d-flex","onUpdate:modelValue":Ve},null,8,["model-value","indeterminate"]),l("div",{class:"w-100 d-flex align-center action-bar-actions gap-x-1",style:Me({visibility:a(pe)||a(B)?void 0:"hidden"})},[W(e(k,{onClick:s[9]||(s[9]=o=>M("trash"))},{default:t(()=>[e(u,{icon:"bx-trash",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Delete Mail ")]),_:1})]),_:1},512),[[Z,"filter"in a($).params?a($).params.filter!=="trashed":!0]]),e(k,{onClick:s[10]||(s[10]=o=>a(re)?M("unread"):M("read"))},{default:t(()=>[e(u,{icon:a(re)?"bx-envelope":"bx-envelope-open",size:"22"},null,8,["icon"]),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(b(a(re)?"Mark as Unread":"Mark as Read"),1)]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(u,{icon:"bx-folder",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Folder ")]),_:1}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(p(!0),y(A,null,F(a(U),o=>(p(),R(le,{key:o.title,class:G([a(n)(o.action)?"d-flex":"d-none","items-center"]),href:"#",onClick:H=>Ee(o.action)},{prepend:t(()=>[e(u,{icon:o.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(oe,{class:"text-capitalize"},{default:t(()=>[v(b(o.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(u,{icon:"bx-label",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Label ")]),_:1}),e(te,{activator:"parent"},{default:t(()=>[e(ae,{density:"compact"},{default:t(()=>[(p(!0),y(A,null,F(a(z),o=>(p(),R(le,{key:o.title,href:"#",onClick:H=>ze(o.title)},{prepend:t(()=>[e(Ce,{inline:"",color:a(S)(o.title),dot:""},null,8,["color"])]),default:t(()=>[e(oe,{class:"ms-2 text-capitalize"},{default:t(()=>[v(b(o.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})],4),e(K),e(k,{onClick:a(x)},{default:t(()=>[e(u,{icon:"bx-refresh",size:"22"})]),_:1},8,["onClick"]),e(k,null,{default:t(()=>[e(u,{icon:"bx-dots-vertical-rounded",size:"22"})]),_:1})]),e(P),a(f)&&a(f).length?(p(),R(a(ue),{key:0,tag:"ul",options:{wheelPropagation:!1},class:"email-list"},{default:t(()=>[(p(!0),y(A,null,F(a(f),o=>{var H;return W((p(),y("li",{key:o.id,class:G(["email-item d-flex align-center pa-4 gap-2 cursor-pointer",[{"email-read":o.isRead}]]),onClick:I=>Le(o)},[e(_e,{"model-value":a(c).includes(o.id),class:"flex-shrink-0","onUpdate:modelValue":I=>m(o.id),onClick:s[11]||(s[11]=J(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),e(k,{color:o.isStarred?"warning":"default",onClick:J(I=>M(o.isStarred?"unstar":"star",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"bx-star",size:"22"})]),_:2},1032,["color","onClick"]),e($e,{size:"32"},{default:t(()=>{var I,fe;return[e(de,{src:(I=o.from)==null?void 0:I.avatar,alt:(fe=o.from)==null?void 0:fe.name},null,8,["src","alt"])]}),_:2},1024),l("h6",Ut,b(o.from.name),1),l("span",Bt,b(o.subject),1),e(K),l("div",{class:G(["email-meta align-center gap-2",r.$vuetify.display.xs?"d-none":""])},[(p(!0),y(A,null,F(o.labels,I=>(p(),R(u,{key:I,icon:"bx-bxs-circle",size:"8",color:a(S)(I)},null,8,["color"]))),128)),l("span",It,b(("formatDateToMonthShort"in r?r.formatDateToMonthShort:a(De))(o.time)),1)],2),l("div",Nt,[e(k,{onClick:J(I=>M("trash",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"bx-trash",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Delete Mail ")]),_:1})]),_:2},1032,["onClick"]),e(k,{class:"mx-1",onClick:J(I=>M(o.isRead?"unread":"read",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:o.isRead?"bx-envelope":"bx-envelope-open",size:"22"},null,8,["icon"]),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(b(o.isRead?"Mark as Unread":"Mark as Read"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(k,{onClick:J(I=>M("spam",[o.id]),["stop"])},{default:t(()=>[e(u,{icon:"bx-info-circle",size:"22"}),e(N,{activator:"parent",location:"top"},{default:t(()=>[v(" Move to Spam ")]),_:1})]),_:2},1032,["onClick"])])],10,Rt)),[[Z,(H=a(f))==null?void 0:H.length]])}),128)),W(l("li",Ft,Ot,512),[[Z,!a(f).length]])]),_:1})):j("",!0)]),_:1}),W(e(tt,{onClose:s[12]||(s[12]=o=>L.value=!1)},null,512),[[Z,a(L)]])]),_:1})]),_:1})}}});export{Ta as default};
