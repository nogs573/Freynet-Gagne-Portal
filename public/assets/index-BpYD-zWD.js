import{r as Q}from"./validators-DpYrMFzk.js";import{w as W,d as q,r as w,o as y,g as P,f as g,b as c,n as u,am as X,t as B,v as L,e as N,a2 as I,ah as J,ag as U,c as C,y as _,az as Ke,aA as Ue,ap as Re,an as Me,ao as He,aM as Ze,a as We,al as Xe,F as Y,i as ee,q as Je,K as Ye,dh as ie,di as G,x as qe,aw as je}from"./main-COzPSvmz.js";import{_ as ve}from"./AppTextField.vue_vue_type_script_setup_true_lang-Dba_d-Do.js";import{_ as Ge}from"./AppSelect.vue_vue_type_script_setup_true_lang-mfWXM2VL.js";import{_ as Qe}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-yCUfibI0.js";import{_ as et}from"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-CTgVjhwx.js";import{u as tt,S as nt,P as at,U as ot,E as rt}from"./index-DJ1wiDzC.js";import{T as lt}from"./index-C2zTTMST.js";import{P as st}from"./vue3-perfect-scrollbar.esm-DhWXpBVy.js";import{V as it}from"./VDivider-BaT1F8ur.js";import{V as te}from"./VForm-Df3rddCt.js";import{V as De}from"./VCardText-Cwvv1NXL.js";import{V as dt,a as K}from"./VRow-BJ3vRaQf.js";import{V as ye}from"./VChip-DPeYBiGA.js";import{V as ct}from"./VSelect-B9TDWHSZ.js";import{V as Ne}from"./VAvatar-BgzCTEhE.js";import{V as de}from"./VImg-Mm9y2cRD.js";import{V as we}from"./VTooltip-CvvrClPn.js";import{V as ut}from"./VFileInput-laOw61TN.js";import{V as ft}from"./VNavigationDrawer-BnshVB9y.js";import{_ as mt}from"./AppTextarea.vue_vue_type_script_setup_true_lang-BQ4muvCJ.js";import{_ as pt}from"./MoreBtn.vue_vue_type_script_setup_true_lang-CoJ46Clz.js";import{V as gt}from"./VSpacer-DOYHaAei.js";import{V as ht}from"./VMenu-Wpc6e35-.js";import{V as bt}from"./VList-CNvbjYBq.js";import{V as vt}from"./VCard-n1X1cK2l.js";import{V as Dt}from"./VTextField-Bvt5xpEn.js";import{u as yt}from"./useApi-D6Fo_5Xj.js";import{$ as F}from"./api-CeGBCOUr.js";import"./helpers-DK5QwNv0.js";import"./form-D3LuPyIe.js";import"./VField-DTZzSet7.js";import"./easing-CjukEv2V.js";import"./VInput-DmbVP3f3.js";import"./forwardRefs-C-GTDzx5.js";/* empty css              */import"./VSlideGroup-S6brIomR.js";import"./dialog-transition-svcbKRDj.js";import"./VOverlay-NcYmFA8g.js";import"./delay-BHYXvR4k.js";import"./lazy-D9Z9oHvh.js";import"./scopeId-Cu4Sm8bO.js";import"./VCheckboxBtn-Jm2QJJl5.js";import"./VSelectionControl-DTAglom5.js";import"./VCounter-D7mVbNfZ.js";import"./ssrBoot-5xkFD_xz.js";/* empty css                   */function Nt(e,t){var n=!1;return function(...a){n||(e.call(null,...a),n=!0,setTimeout(function(){n=!1},t))}}function ke(e){return e.split(" ").filter(t=>t)}var xe=typeof window<"u";function R(e,t,n=!1){if(!t)return;const a=ke(t);if(a.length&&!a.includes("longTouch"))for(const o of e){if(!j(o)||!S.has(o)){o.classList.add(...a);continue}const l=[],r=S.get(o);if(r){for(const d of a)o.classList.contains(d)?o.classList.contains(d)&&n===!1&&l.push(d):o.classList.add(d);r.privateClasses=l,S.set(o,r)}}}function ne(e,t){if(!t)return;const n=ke(t);if(n.length)for(const a of e){if(!j(a)){a.classList.remove(...n);continue}const o=S.get(a);if(o)for(const l of n)o.privateClasses.includes(l)||a.classList.remove(l)}}function Te(e){let t=e.parentNode;for(;t!==null&&t.nodeType===1&&t instanceof HTMLElement;){const a=window.getComputedStyle(t).getPropertyValue("overflow");if(a==="scroll"||a==="auto")return t;t=t.parentNode}return document.documentElement}function wt(e){if(!(e.e instanceof TouchEvent))return;const t=e.e.touches[0].clientX,n=e.e.touches[0].clientY;let a=document.elementFromPoint(t,n);if(!j(a))return;let o,l=!0;for(;a&&l;){if(S.has(a)||E.has(a)){l=!1,o=E.has(a);break}a=a.parentNode}if(o){const r=E.get(a);return r?{parent:{el:a,data:r}}:void 0}else{const r=S.get(a);if(!r)return;const d=E.get(a.parentNode);return d?{node:{el:a,data:r},parent:{el:a.parentNode,data:d}}:void 0}}function j(e){return e instanceof HTMLElement&&e.parentNode instanceof HTMLElement}function Ie(e,t){const n=new AbortController;for(const a in t){const o=t[a];e.addEventListener(a,o,{signal:n.signal,passive:!1})}return n}function Ve(e,t,n=!1){const a=window.getComputedStyle(e),o=["position","z-index","top","left","x","pointer-events","y","transform-origin","filter","-webkit-text-fill-color"];for(const l of Array.from(a))n===!1&&l&&o.includes(l)||t.style.setProperty(l,a.getPropertyValue(l),a.getPropertyPriority(l));for(const l of Array.from(e.children)){if(!j(l))continue;const r=t.children[Array.from(e.children).indexOf(l)];Ve(l,r,n)}}function M(e){return e instanceof DragEvent?{x:e.clientX,y:e.clientY}:{x:e.touches[0].clientX,y:e.touches[0].clientY}}Array();var pe=[{transform:"translateY(100%)"},{transform:"translateY(0)"}],ge=[{transform:"translateY(-100%)"},{transform:"translateY(0)"}],le=[{transform:"translateX(100%)"},{transform:"translateX(0)"}],se=[{transform:"translateX(-100%)"},{transform:"translateX(0)"}];function Ce(e={}){return t=>{const n=E.get(t);if(n)return{setup(){n.config.remapFinished=()=>{},document.head.querySelector("[data-drag-and-drop]")},setupNodeRemap(a){if(!s)return;const o=e.duration||150;if(a.nodeData.value===s.draggedNode.data.value){switch(s.incomingDirection){case"below":$(a.node,pe,o);break;case"above":$(a.node,ge,o);break;case"left":$(a.node,se,o);break;case"right":$(a.node,le,o);break}return}if(!s.affectedNodes.map(p=>p.data.value).includes(a.nodeData.value))return;const l=a.node.getBoundingClientRect(),r=s.affectedNodes.findIndex(p=>p.data.value===a.nodeData.value),i=s.draggedNode.data.index>=s.targetIndex;let f;if(i?f=s.affectedNodes[r+1]?s.affectedNodes[r+1]:s.affectedNodes[r-1]:f=s.affectedNodes[r-1]?s.affectedNodes[r-1]:s.affectedNodes[r+1],f){const p=Math.abs(l.x-f.el.getBoundingClientRect().x),k=Math.abs(l.y-f.el.getBoundingClientRect().y);p>k&&i?$(a.node,se,o):p>k&&!i&&$(a.node,le,o)}else switch(s.incomingDirection){case"below":$(a.node,ge,o);break;case"above":$(a.node,pe,o);break;case"left":$(a.node,le,o);break;case"right":$(a.node,se,o);break}}}}}function $(e,t,n){s&&(s.preventEnter=!0,e.animate(t,{duration:n}),setTimeout(()=>{s&&(s.swappedNodeValue=void 0,s.remapJustFinished=!0,s.lastTargetValue=void 0,s.preventEnter=!1)},n))}var he={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]},S=new WeakMap,E=new WeakMap,s=void 0;function kt(){s=void 0}function _e(e){return s={ascendingDirection:!1,incomingDirection:void 0,enterCount:0,targetIndex:0,affectedNodes:[],lastValue:void 0,activeNode:void 0,lastTargetValue:void 0,remapJustFinished:!1,preventEnter:!1,clonedDraggedEls:[],swappedNodeValue:!1,originalZIndex:void 0,...e},s}function xt(e,t){return s={...e,...t},s}function Pe(e){const{x:t,y:n}=M(e.e);return{coordinates:{x:t,y:n},draggedNode:{el:e.targetData.node.el,data:e.targetData.node.data},draggedNodes:[{el:e.targetData.node.el,data:e.targetData.node.data}],initialIndex:e.targetData.node.data.index,initialParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},lastParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},scrollParent:Te(e.targetData.node.el)}}function Tt(e,t){const n=Ee(e),o=[...ce(t.targetData.parent.el,t.targetData.parent.data).filter(l=>!n.includes(l))];o.splice(t.targetData.node.data.index,0,...n),e.lastTargetValue=t.targetData.node.data.value,ue(t.targetData.parent.el,t.targetData.parent.data,[...o])}function ce(e,t){return[...t.getValues(e)]}function ue(e,t,n){t.setValues(n,e)}function Ee(e){return[...e.draggedNodes.map(t=>t.data.value)]}function It({parent:e,getValues:t,setValues:n,config:a={}}){var l,r;if(!xe)return;document.addEventListener("dragover",d=>{if(d.preventDefault(),s){s.remapJustFinished=!1,s.lastTargetValue=void 0;const{x:i,y:f}=M(d);s.coordinates.y=f,s.coordinates.x=i,ae()}}),Vt(e);const o={getValues:t,setValues:n,config:{handleDragstart:Et,handleDragoverNode:nn,handleDragoverParent:an,handleEnd:$e,handleTouchstart:Rt,handleTouchmove:Wt,handleTouchOverNode:zt,handleTouchOverParent:on,performSort:Tt,performTransfer:Le,root:document,setupNode:Ft,setupNodeRemap:Ae,reapplyDragClasses:Lt,tearDownNode:Kt,tearDownNodeRemap:Ot,remapFinished:Pt,scrollBehavior:{x:.8,y:.8},threshold:{horizontal:0,vertical:0},...a},enabledNodes:[],abortControllers:{}};Ct(e,o),(l=a.plugins)==null||l.forEach(d=>{var i,f;(f=(i=d(e))==null?void 0:i.tearDown)==null||f.call(i)}),(r=a.plugins)==null||r.forEach(d=>{var i,f;(f=(i=d(e))==null?void 0:i.setup)==null||f.call(i)}),fe(e,!0)}function Vt(e){const t=E.get(e);t&&t.abortControllers.mainParent&&t.abortControllers.mainParent.abort()}function Ct(e,t){new MutationObserver(_t).observe(e,{childList:!0}),E.set(e,t),t.abortControllers.mainParent=Ie(e,{dragover:dn(Nt(t.config.handleDragoverParent,10)),touchOverParent:t.config.handleTouchOverParent})}function _t(e){const t=e[0].target;t instanceof HTMLElement&&fe(t)}function fe(e,t){const n=E.get(e);if(!n)return;const a=[],o=n.config;for(let d=0;d<e.children.length;d++){const i=e.children[d];if(!j(i))continue;const f=S.get(i);(t||!f)&&o.tearDownNode({node:i,parent:e,nodeData:f,parentData:n}),!o.disabled&&(!o.draggable||o.draggable&&o.draggable(i))&&a.push(i)}if(a.length!==n.getValues(e).length&&!o.disabled){console.warn("The number of enabled nodes does not match the number of values.");return}const l=n.getValues(e),r=[];for(let d=0;d<a.length;d++){const i=a[d],f=S.get(i),p=Object.assign(f??{privateClasses:[],abortControllers:{}},{value:l[d],index:d});if(s&&p.value===s.draggedNode.data.value&&(s.draggedNode.data=p,s.draggedNode.el=i),s&&s.draggedNodes.map(x=>x.data.value).includes(p.value)){const x=s.draggedNodes.find(D=>D.data.value===p.value);x&&(x.el=i)}r.push({el:i,data:p});const k={node:i,parent:e,parentData:n,nodeData:p};(t||!f)&&o.setupNode(k),Ae(k)}E.set(e,{...n,enabledNodes:r}),o.remapFinished(n)}function Pt(){s&&(s.preventEnter=!1,s.swappedNodeValue=void 0,s.remapJustFinished=!0)}function Et(e){e.e instanceof DragEvent&&St({e:e.e,targetData:e.targetData})}function Bt(e,t,n){R([e],t),setTimeout(()=>{ne([e],t),R([e],n)})}function At(e){const t=_e(Pe(e));return e.e.stopPropagation(),e.e.dataTransfer&&(e.e.dataTransfer.dropEffect="move",e.e.dataTransfer.effectAllowed="move",e.e.dataTransfer.setDragImage(e.targetData.node.el,e.e.offsetX,e.e.offsetY)),t}function Be(e){if(!(e.e instanceof DragEvent)&&!(e.e instanceof TouchEvent))return!1;const t=e.targetData.parent.data.config;if(!t.dragHandle)return!0;const n=e.targetData.node.el.querySelectorAll(t.dragHandle);if(!n)return!1;const a=M(e.e),o=t.root.elementFromPoint(a.x,a.y);if(!o)return!1;for(const l of Array.from(n))if(o===l||l.contains(o))return!0;return!1}function $t(e){if(!Be(e))return;const t=Mt(e);Ht(e,t),Zt(e,t)}function St(e){if(!Be(e)){e.e.preventDefault();return}const t=e.targetData.parent.data.config,n=At(e),a=e.targetData.node.el.style.zIndex;n.originalZIndex=a,e.targetData.node.el.style.zIndex="9999",Bt(n.draggedNode.el,t.draggingClass,t.dropZoneClass)}function zt(e){s&&(e.detail.targetData.parent.el===s.lastParent.el?Fe(e.detail,s):oe(e.detail,s))}function Ft(e){var n;const t=e.parentData.config;e.node.draggable=!0,e.nodeData.abortControllers.mainNode=Ie(e.node,{dragstart:H(t.handleDragstart),dragover:H(t.handleDragoverNode),dragend:H(t.handleEnd),touchstart:H(t.handleTouchstart),touchmove:H(t.handleTouchmove),touchend:H(t.handleEnd),touchOverNode:t.handleTouchOverNode}),t.reapplyDragClasses(e.node,e.parentData),(n=e.parentData.config.plugins)==null||n.forEach(a=>{var o,l;(l=(o=a(e.parent))==null?void 0:o.setupNode)==null||l.call(o,e)})}function Ae(e){var t;S.set(e.node,e.nodeData),(t=e.parentData.config.plugins)==null||t.forEach(n=>{var a,o;(o=(a=n(e.parent))==null?void 0:a.setupNodeRemap)==null||o.call(a,e)})}function Lt(e,t){if(!s)return;const n="touchedNode"in s?t.config.touchDropZoneClass:t.config.dropZoneClass;s.draggedNode.el===e&&R([e],n,!0)}function Ot(e){var t;(t=e.parentData.config.plugins)==null||t.forEach(n=>{var a,o;(o=(a=n(e.parent))==null?void 0:a.tearDownNodeRemap)==null||o.call(a,e)})}function Kt(e){var t,n,a,o,l;(t=e.parentData.config.plugins)==null||t.forEach(r=>{var d,i;(i=(d=r(e.parent))==null?void 0:d.tearDownNode)==null||i.call(d,e)}),e.node.draggable=!1,(a=(n=e.nodeData)==null?void 0:n.abortControllers)!=null&&a.mainNode&&((l=(o=e.nodeData)==null?void 0:o.abortControllers)==null||l.mainNode.abort())}function $e(e){s&&(Ut(e,s),kt())}function Ut(e,t){var l,r,d,i;document.removeEventListener("contextmenu",Se),"longTouchTimeout"in t&&t.longTouchTimeout&&clearTimeout(t.longTouchTimeout);const n=(l=E.get(t.initialParent.el))==null?void 0:l.config,o="touchedNode"in t?n==null?void 0:n.touchDropZoneClass:n==null?void 0:n.dropZoneClass;t.originalZIndex!==void 0&&(t.draggedNode.el.style.zIndex=t.originalZIndex),R(t.draggedNodes.map(f=>f.el),o,!0),ne(t.draggedNodes.map(f=>f.el),o),n!=null&&n.longTouchClass&&ne(t.draggedNodes.map(f=>f.el),(d=(r=t.initialParent.data)==null?void 0:r.config)==null?void 0:d.longTouchClass),"touchedNode"in t&&((i=t.touchedNode)==null||i.remove())}function Rt(e){e.e instanceof TouchEvent&&$t({e:e.e,targetData:e.targetData})}function Mt(e){e.e.stopPropagation();const t=e.targetData.node.el.cloneNode(!0),n=e.targetData.node.el.getBoundingClientRect();return xt(_e(Pe(e)),{coordinates:{x:e.e.touches[0].clientX,y:e.e.touches[0].clientY},scrollParent:Te(e.targetData.node.el),touchStartLeft:e.e.touches[0].clientX-n.left,touchStartTop:e.e.touches[0].clientY-n.top,touchedNode:t,touchMoving:!1})}function Se(e){e.preventDefault()}function Ht(e,t){t.touchedNodeDisplay=t.touchedNode.style.display;const n=e.targetData.node.el.getBoundingClientRect();t.touchedNode.style.cssText=`
            width: ${n.width}px;
            position: fixed;
            pointer-events: none;
            top: -9999px;
            z-index: 999999;
            display: none;
          `,document.body.append(t.touchedNode),Ve(e.targetData.node.el,t.touchedNode),t.touchedNode.style.display="none",document.addEventListener("contextmenu",Se)}function Zt(e,t){const n=e.targetData.parent.data.config;n.longTouch&&(t.longTouchTimeout=setTimeout(()=>{t&&(t.longTouch=!0,n.longTouchClass&&e.e.cancelable&&R(t.draggedNodes.map(a=>a.el),n.longTouchClass),e.e.preventDefault())},n.longTouchTimeout||200))}function Wt(e){!s||!("touchedNode"in s)||tn(e,s)}function Xt(e,t){t.longTouchClass&&ne(e.draggedNodes.map(n=>n.el),t==null?void 0:t.longTouchClass),t.touchDraggingClass&&R([e.touchedNode],t.touchDraggingClass),t.touchDropZoneClass&&R(e.draggedNodes.map(n=>n.el),t.touchDropZoneClass)}function Jt(e){if(!e||!e.scrollParent)return;const{x:t,y:n,width:a,height:o}=e.scrollParent.getBoundingClientRect(),{x:l,y:r,scrollOutside:d}=e.lastParent.data.config.scrollBehavior;return{state:e,xThresh:l,yThresh:r,scrollOutside:d,scrollParent:e.scrollParent,x:t,y:n,width:a,height:o}}function Yt(e){const t=Jt(s);if(t)switch(e){case"down":return Qt(t.state,t);case"up":return Gt(t.state,t);case"right":return qt(t.state,t);case"left":return jt(t.state,t)}}function qt(e,t){const n=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&n<0)&&n<(1-t.xThresh)*t.scrollParent.clientWidth&&!(t.scrollParent.scrollLeft+t.scrollParent.clientWidth>=t.scrollParent.scrollWidth))return e}function jt(e,t){const n=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&n>t.scrollParent.clientWidth)&&n>t.xThresh*t.scrollParent.clientWidth&&t.scrollParent.scrollLeft!==0)return e}function Gt(e,t){const n=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&n>t.scrollParent.clientHeight)&&n>t.yThresh*t.scrollParent.clientHeight&&t.scrollParent.scrollTop!==0)return e}function Qt(e,t){const n=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&n<0)&&n<(1-t.yThresh)*t.scrollParent.clientHeight&&!(t.scrollParent.scrollTop+t.scrollParent.clientHeight>=t.scrollParent.scrollHeight))return e}function en(e,t){t.touchMoving=!0,t.touchedNode.style.display=t.touchedNodeDisplay||"";const{x:n,y:a}=M(e.e);t.coordinates.y=a,t.coordinates.x=n;const o=t.touchStartLeft??0,l=t.touchStartTop??0;t.touchedNode.style.left=`${n-o}px`,t.touchedNode.style.top=`${a-l}px`,Xt(t,e.targetData.parent.data.config)}function tn(e,t){if(e.targetData.parent.data.config.longTouch&&!t.longTouch){clearTimeout(t.longTouchTimeout);return}e.e.cancelable&&e.e.preventDefault(),en(e,t),ae();const a=wt(e);if(!a)return;const o={e:e.e,targetData:a};"node"in a?a.node.el.dispatchEvent(new CustomEvent("touchOverNode",{detail:o})):a.parent.el.dispatchEvent(new CustomEvent("touchOverParent",{detail:o}))}function ae(){for(const e of Object.keys(he)){const[t,n]=he[e];ze(e,t,n)}}function ze(e,t,n){const a=Yt(e);a&&(a.scrollParent.scrollBy(t,n),setTimeout(()=>{ze(e,t,n)},"touchedNode"in a?10:100))}function nn(e){if(!s)return;const{x:t,y:n}=M(e.e);s.coordinates.y=n,s.coordinates.x=t,ae(),ln(e,s)}function an(e){if(!s)return;const{x:t,y:n}=M(e.e);s.coordinates.y=n,s.coordinates.x=t,ae(),oe(e,s)}function on(e){s&&oe(e.detail,s)}function rn(e,t){if(e.targetData.parent.el===t.lastParent.el)return!1;const n=e.targetData.parent.data.config;if(n.dropZone===!1)return!1;const a=t.initialParent.data.config;return n.accepts?n.accepts(e.targetData.parent,t.initialParent,t.lastParent,t):!(!n.group||n.group!==a.group)}function ln(e,t){var n;e.e.preventDefault(),e.e.stopPropagation(),e.targetData.parent.el===((n=t.lastParent)==null?void 0:n.el)?Fe(e,t):oe(e,t)}function sn(e,t,n,a){var k;if(t.remapJustFinished)return t.remapJustFinished=!1,t.lastTargetValue=e.targetData.node.data.value,!1;if(t.lastTargetValue===e.targetData.node.data.value||t.draggedNodes.map(x=>x.el).includes(e.targetData.node.el)||t.preventEnter||t.swappedNodeValue===e.targetData.node.data.value||e.targetData.parent.el!==((k=t.lastParent)==null?void 0:k.el)||e.targetData.parent.data.config.sortable===!1)return!1;const o=e.targetData.node.el.getBoundingClientRect(),l=t.draggedNode.el.getBoundingClientRect(),r=o.y-l.y,d=o.x-l.x;let i;const f=t.draggedNode.data.index>e.targetData.node.data.index?[e.targetData.node.data.index,t.draggedNode.data.index]:[t.draggedNode.data.index,e.targetData.node.data.index];t.targetIndex=e.targetData.node.data.index,t.affectedNodes=e.targetData.parent.data.enabledNodes.filter(x=>f[0]<=x.data.index&&x.data.index<=f[1]&&x.el!==t.draggedNode.el),Math.abs(r)>Math.abs(d)?i=r>0?"above":"below":i=d>0?"left":"right";const p=t.lastParent.data.config.threshold;switch(i){case"left":if(n>o.x+o.width*p.horizontal)return t.incomingDirection="left",!0;break;case"right":if(n<o.x+o.width*(1-p.horizontal))return t.incomingDirection="right",!0;break;case"above":if(a>o.y+o.height*p.vertical)return t.incomingDirection="above",!0;break;case"below":if(a<o.y+o.height*(1-p.vertical))return t.incomingDirection="below",!0;break}return!1}function Fe(e,t){const{x:n,y:a}=M(e.e);sn(e,t,n,a)&&(t.swappedNodeValue=e.targetData.node.data.value,t.preventEnter=!0,e.targetData.parent.data.config.performSort(t,e))}function H(e){function t(n){var r;const a=S.get(n),o=n.parentNode||((r=s==null?void 0:s.lastParent)==null?void 0:r.el);if(!a)return;const l=E.get(o);if(l)return{node:{el:n,data:a},parent:{el:o,data:l}}}return n=>{const a=t(n.currentTarget);if(a)return e({e:n,targetData:a})}}function Le(e,t){const n=Ee(e),a=ce(e.lastParent.el,e.lastParent.data).filter(d=>!n.includes(d)),o=ce(t.targetData.parent.el,t.targetData.parent.data),l=e.initialParent.el===t.targetData.parent.el&&t.targetData.parent.data.config.sortable===!1;let r;"node"in t.targetData?(l?r=e.initialIndex:t.targetData.parent.data.config.sortable===!1?r=t.targetData.parent.data.enabledNodes.length:r=t.targetData.node.data.index,o.splice(r,0,...n)):(r=l?e.initialIndex:t.targetData.parent.data.enabledNodes.length,o.splice(r,0,...n)),ue(e.lastParent.el,e.lastParent.data,a),ue(t.targetData.parent.el,t.targetData.parent.data,o)}function oe(e,t){rn(e,t)&&(e.targetData.parent.data.config.performTransfer(t,e),t.lastParent=e.targetData.parent)}function dn(e){function t(n){const a=E.get(n);if(a)return{parent:{el:n,data:a}}}return n=>{const a=t(n.currentTarget);if(a)return e({e:n,targetData:a})}}function be(e){if(e instanceof HTMLElement)return e;if(e.value instanceof HTMLElement)return e.value;if("$el"in e&&e.$el instanceof HTMLElement)return e.$el}function cn(e,t){Array.isArray(e)||(e=[e]);for(const n of e){const a=be(n);if(a)return t(a);const o=W(n,l=>{if(!l)return;const r=be(l);r?t(r):console.warn("Invalid parent element",l),o()})}}var me=new WeakMap;function un(e){const t=me.get(e);return t?t.value:(console.warn("No values found for parent element"),[])}function fn(e,t){const n=me.get(t);n&&(n.value=e)}function Oe(e){xe&&(Array.isArray(e)||(e=[e]),e.forEach(t=>{const{parent:n,values:a,...o}=t;cn(n,mn(o,a))}))}function mn(e,t){return n=>{me.set(n,t),It({parent:n,getValues:un,setValues:fn,config:{...e,dropZones:[]}})}}const pn=N("p",{class:"mb-1 text-body-2 text-high-emphasis",style:{"line-height":"15px"}}," Assigned ",-1),gn=N("p",{class:"text-body-2 text-high-emphasis mb-1",style:{"line-height":"15px"}}," COMMENT ",-1),hn={class:"border rounded px-3 py-2"},bn={key:0,class:"d-flex justify-end flex-wrap gap-x-2"},vn=q({__name:"KanbanBoardEditDrawer",props:{kanbanItem:{default:()=>({item:{title:"",dueDate:"2022-01-01T00:00:00Z",labels:[],members:[],id:0,attachments:0,commentsCount:0,image:"",comments:""},boardId:0,boardName:""})},isDrawerOpen:{type:Boolean}},emits:["update:isDrawerOpen","update:kanbanItem","deleteKanbanItem"],setup(e,{emit:t}){const n=e,a=t,o=w(),l=["UX","Image","Code Review","Dashboard","Bug"],r=w(JSON.parse(JSON.stringify(n.kanbanItem.item))),d=V=>{var b;a("update:isDrawerOpen",V),V||(b=o.value)==null||b.reset()};W(()=>n.kanbanItem,()=>{r.value=JSON.parse(JSON.stringify(n.kanbanItem.item))},{deep:!0});const i=()=>{var V;(V=o.value)==null||V.validate().then(async b=>{var A;b.valid&&(a("update:kanbanItem",{item:r.value,boardId:n.kanbanItem.boardId,boardName:n.kanbanItem.boardName}),a("update:isDrawerOpen",!1),await Xe(),(A=o.value)==null||A.reset())})},f=()=>{a("deleteKanbanItem",{item:r.value,boardId:n.kanbanItem.boardId,boardName:n.kanbanItem.boardName}),a("update:isDrawerOpen",!1)},p=tt({content:"",extensions:[nt,lt.configure({types:["heading","paragraph"]}),at.configure({placeholder:"Write a Comment..."}),ot]}),k=w({altFormat:"M j, Y",altInput:!0,dateFormat:"Y-m-d"}),x={UX:"success",Image:"warning","Code Review":"info",Dashboard:"primary",Bug:"error"},D=[{img:Ke,name:"John Doe"},{img:Ue,name:"Jane Smith"},{img:Re,name:"Robert Johnson"},{img:Me,name:"Lucy Brown"},{img:He,name:"Mike White"},{img:Ze,name:"Anna Black"}],z=w();return(V,b)=>{const A=et,O=ve,Z=Qe,v=Ge,m=We("IconBtn");return y(),P(ft,{location:"end",width:370,temporary:"",border:"0","model-value":n.isDrawerOpen,class:"kanban-navigation-drawer","onUpdate:modelValue":d},{default:g(()=>[c(A,{title:"Edit Task",onCancel:b[0]||(b[0]=h=>V.$emit("update:isDrawerOpen",!1))}),c(it),c(u(st),{options:{wheelPropagation:!1},style:{"block-size":"calc(100vh - 4rem)"}},{default:g(()=>[u(r)?(y(),P(u(te),{key:0,ref_key:"refEditTaskForm",ref:o,onSubmit:X(i,["prevent"])},{default:g(()=>[c(De,null,{default:g(()=>[c(dt,null,{default:g(()=>[c(K,{cols:"12"},{default:g(()=>[c(O,{modelValue:u(r).title,"onUpdate:modelValue":b[1]||(b[1]=h=>u(r).title=h),label:"Title",rules:["requiredValidator"in V?V.requiredValidator:u(Q)]},null,8,["modelValue","rules"])]),_:1}),c(K,{cols:"12"},{default:g(()=>[c(Z,{modelValue:u(r).dueDate,"onUpdate:modelValue":b[2]||(b[2]=h=>u(r).dueDate=h),label:"Due date",config:u(k)},null,8,["modelValue","config"])]),_:1}),c(K,{cols:"12"},{default:g(()=>[c(v,{modelValue:u(r).labels,"onUpdate:modelValue":b[3]||(b[3]=h=>u(r).labels=h),items:l,label:"Label",multiple:"",eager:""},{chip:g(({item:h})=>[c(ye,{color:x[h.raw],closable:""},{default:g(()=>[B(L(h.raw),1)]),_:2},1032,["color"])]),_:1},8,["modelValue"])]),_:1}),c(K,{cols:"12"},{default:g(()=>[pn,N("div",null,[c(ct,{modelValue:u(r).members,"onUpdate:modelValue":b[4]||(b[4]=h=>u(r).members=h),items:D,"item-title":"name","item-value":"name",multiple:"","return-object":"",variant:"plain","menu-props":{offset:10}},{selection:g(({item:h})=>[c(Ne,{size:"26"},{default:g(()=>[c(de,{src:h.raw.img},null,8,["src"]),c(we,{activator:"parent"},{default:g(()=>[B(L(h.raw.name),1)]),_:2},1024)]),_:2},1024)]),"prepend-inner":g(()=>[c(m,{size:"26",variant:"tonal"},{default:g(()=>[c(I,{size:"20",icon:"bx-plus"})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),c(K,{cols:"12"},{default:g(()=>[c(ut,{modelValue:u(z),"onUpdate:modelValue":b[5]||(b[5]=h=>J(z)?z.value=h:null),"prepend-inner-icon":"",multiple:"",variant:"outlined",label:"No file chosen",clearable:""},{append:g(()=>[c(U,{variant:"tonal"},{default:g(()=>[B(" Choose ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(K,{cols:"12"},{default:g(()=>[gn,N("div",hn,[c(u(rt),{editor:u(p)},null,8,["editor"]),u(p)?(y(),C("div",bn,[c(I,{icon:"bx-bold",color:u(p).isActive("bold")?"primary":"secondary",size:"20",onClick:b[6]||(b[6]=h=>u(p).chain().focus().toggleBold().run())},null,8,["color"]),c(I,{color:u(p).isActive("underline")?"primary":"secondary",icon:"bx-underline",size:"20",onClick:b[7]||(b[7]=h=>u(p).commands.toggleUnderline())},null,8,["color"]),c(I,{color:u(p).isActive("italic")?"primary":"secondary",icon:"bx-italic",size:"20",onClick:b[8]||(b[8]=h=>u(p).chain().focus().toggleItalic().run())},null,8,["color"]),c(I,{color:u(p).isActive({textAlign:"left"})?"primary":"secondary",icon:"bx-align-left",size:"20",onClick:b[9]||(b[9]=h=>u(p).chain().focus().setTextAlign("left").run())},null,8,["color"]),c(I,{color:u(p).isActive({textAlign:"center"})?"primary":"secondary",icon:"bx-align-middle",size:"20",onClick:b[10]||(b[10]=h=>u(p).chain().focus().setTextAlign("center").run())},null,8,["color"]),c(I,{color:u(p).isActive({textAlign:"right"})?"primary":"secondary",icon:"bx-align-right",size:"20",onClick:b[11]||(b[11]=h=>u(p).chain().focus().setTextAlign("right").run())},null,8,["color"])])):_("",!0)])]),_:1}),c(K,{cols:"12"},{default:g(()=>[c(U,{type:"submit",class:"me-4"},{default:g(()=>[B(" Update ")]),_:1}),c(U,{color:"error",variant:"tonal",onClick:f},{default:g(()=>[B(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)):_("",!0)]),_:1})]),_:1},8,["model-value"])}}}),Dn={class:"d-flex align-start gap-2"},yn={key:0,class:"d-flex flex-wrap gap-2"},Nn={class:"text-base text-high-emphasis mb-0"},wn={class:"task-footer d-flex align-center flex-wrap justify-space-between"},kn={key:0,class:"d-flex align-center gap-4"},xn={key:0},Tn={class:"text-body-1 d-inline-block"},In={key:1},Vn={class:"text-body-1 d-inline-block"},Cn={key:1,class:"v-avatar-group"},_n=q({__name:"KanbanCard",props:{item:{},boardId:{},boardName:{}},emits:["deleteKanbanItem"],setup(e,{emit:t}){const n=e,a=t,o={UX:"success",Image:"warning","Code Review":"info",Dashboard:"primary",Bug:"error"},l=[{title:"Copy Task link",href:"#"},{title:"Duplicate Task",href:"#"},{title:"Delete",onClick:()=>{a("deleteKanbanItem",{item:n.item,boardId:n.boardId,boardName:n.boardName})}}];return(r,d)=>r.item?(y(),P(vt,{key:0,ripple:!1,link:!1,class:"kanban-card position-relative"},{default:g(()=>[c(De,{class:"d-flex flex-column gap-2"},{default:g(()=>[N("div",Dn,[r.item.labels&&r.item.labels.length?(y(),C("div",yn,[(y(!0),C(Y,null,ee(r.item.labels,i=>(y(),P(ye,{key:i,size:"small",color:o[i]},{default:g(()=>[B(L(i),1)]),_:2},1032,["color"]))),128))])):_("",!0),c(gt),c(ht,null,{activator:g(({props:i,isActive:f})=>[c(I,Je(i,{icon:"bx-dots-vertical-rounded",class:"position-absolute more-options",style:[{"inset-block-start":"16px","inset-inline-end":"10px"},f?"opacity: 1":""],size:"20",onClick:d[0]||(d[0]=X(()=>{},["stop"]))}),null,16,["style"])]),default:g(()=>[c(bt,{items:l,"item-props":""})]),_:1})]),r.item.image&&r.item.image.length?(y(),P(de,{key:0,src:r.item.image,class:"rounded"},null,8,["src"])):_("",!0),N("p",Nn,L(r.item.title),1),N("div",wn,[r.item.attachments||r.item.commentsCount?(y(),C("div",kn,[r.item.attachments?(y(),C("div",xn,[c(I,{size:"20",icon:"bx-paperclip",class:"me-1"}),N("span",Tn,L(r.item.attachments),1)])):_("",!0),r.item.commentsCount?(y(),C("div",In,[c(I,{size:"20",icon:"bx-chat",class:"me-1"}),N("span",Vn,L(r.item.commentsCount),1)])):_("",!0)])):_("",!0),r.item.members&&r.item.members.length?(y(),C("div",Cn,[(y(!0),C(Y,null,ee(r.item.members,i=>(y(),P(Ne,{key:i.name,size:"30"},{default:g(()=>[c(de,{src:i.img},null,8,["src"]),c(we,{activator:"parent"},{default:g(()=>[B(L(i.name),1)]),_:2},1024)]),_:2},1024))),128))])):_("",!0)])]),_:1})]),_:1})):_("",!0)}}),Pn=Ye(_n,[["__scopeId","data-v-67def265"]]),En={class:"kanban-board"},Bn={class:"kanban-board-header pb-4"},An={key:1,class:"d-flex align-center justify-space-between"},$n={class:"text-h5 text-truncate"},Sn={class:"d-flex align-center"},zn={class:"add-new-form"},Fn=N("span",null,"Add New Item",-1),Ln={class:"mb-4"},On={class:"d-flex gap-4 flex-wrap"},Kn=q({__name:"KanbanItems",props:{kanbanIds:{},groupName:{},boardName:{},boardId:{},kanbanData:{}},emits:["renameBoard","deleteBoard","addNewItem","editItem","updateItemsState","deleteItem"],setup(e,{emit:t}){const n=e,a=t,o=w(),l=w(n.boardName),r=w(n.kanbanIds),d=w(!1),i=w(!1),f=w(),p=w(""),k=w(),x=[{title:"Rename",prependIcon:"bx-edit",onClick:()=>{i.value=!0}},{title:"Delete",prependIcon:"bx-trash",onClick:()=>a("deleteBoard",n.boardId)}],D=()=>{var v;(v=k.value)==null||v.validate().then(m=>{m.valid&&(a("renameBoard",{oldName:n.boardName,newName:l.value,boardId:n.boardId}),i.value=!1)})},z=()=>{var v;(v=f.value)==null||v.validate().then(m=>{m.valid&&(a("addNewItem",{itemTitle:p.value,boardName:n.boardName,boardId:n.boardId}),d.value=!1,p.value="")})};Oe({parent:o,values:r,group:n.groupName,draggable:v=>v.classList.contains("kanban-card"),plugins:[Ce()],performTransfer:(v,m)=>{Le(v,m),a("updateItemsState",{boardId:n.boardId,ids:r.value})},handleEnd:v=>{$e(v),a("updateItemsState",{boardId:n.boardId,ids:r.value})}}),W(n,()=>{r.value=n.kanbanIds},{immediate:!0,deep:!0});const V=v=>n.kanbanData.items.find(m=>m.id===v),b=v=>{a("deleteItem",v)},A=()=>{var v;d.value=!1,(v=f.value)==null||v.reset()};ie(f,A),ie(k,()=>{i.value=!1});const O=()=>{i.value=!1,l.value=n.boardName},Z=v=>{v.key==="Enter"&&!v.shiftKey&&z()};return(v,m)=>{const h=pt,re=mt;return y(),C("div",En,[N("div",Bn,[u(i)?(y(),P(u(te),{key:0,ref_key:"refKanbanBoardTitle",ref:k,onSubmit:X(D,["prevent"])},{default:g(()=>[c(Dt,{modelValue:u(l),"onUpdate:modelValue":m[0]||(m[0]=T=>J(l)?l.value=T:null),autofocus:"",variant:"underlined",rules:["requiredValidator"in v?v.requiredValidator:u(Q)],"hide-details":"",class:"border-0",onKeydown:G(O,["esc"])},{"append-inner":g(()=>[c(I,{size:"20",color:"success",icon:"bx-check",class:"me-1",onClick:D}),c(I,{size:"20",variant:"text",color:"error",icon:"bx-x",class:"flip-in-rtl",onClick:O})]),_:1},8,["modelValue","rules"])]),_:1},512)):(y(),C("div",An,[N("h5",$n,L(v.boardName),1),N("div",Sn,[c(I,{class:"drag-handler",size:"20",icon:"bx-move"}),c(h,{size:"small","icon-size":"20","menu-list":x,"item-props":"",class:"text-high-emphasis"})])]))]),u(r)?(y(),C("div",{key:0,ref_key:"refKanbanBoard",ref:o,class:qe(["kanban-board-drop-zone rounded d-flex flex-column gap-4",u(r).length?"mb-4":""])},[(y(!0),C(Y,null,ee(u(r),T=>(y(),P(Pn,{key:T,item:V(T),"board-id":n.boardId,"board-name":n.boardName,onDeleteKanbanItem:b,onClick:Xn=>a("editItem",{item:V(T),boardId:n.boardId,boardName:n.boardName})},null,8,["item","board-id","board-name","onClick"]))),128)),N("div",zn,[N("div",{class:"text-body-1 text-high-emphasis cursor-pointer d-flex align-center gap-1 ms-4",onClick:m[1]||(m[1]=T=>d.value=!u(d))},[c(I,{size:"15",icon:"bx-plus"}),Fn]),u(d)?(y(),P(u(te),{key:0,ref_key:"refForm",ref:f,class:"mt-4","validate-on":"submit",onSubmit:X(z,["prevent"])},{default:g(()=>[N("div",Ln,[c(re,{modelValue:u(p),"onUpdate:modelValue":m[2]||(m[2]=T=>J(p)?p.value=T:null),rules:["requiredValidator"in v?v.requiredValidator:u(Q)],placeholder:"Add Content",autofocus:"",rows:"2",onKeydown:[G(Z,["enter"]),G(A,["esc"])]},null,8,["modelValue","rules"])]),N("div",On,[c(U,{size:"small",type:"submit"},{default:g(()=>[B(" Add ")]),_:1}),c(U,{size:"small",variant:"tonal",color:"secondary",onClick:A},{default:g(()=>[B(" Cancel ")]),_:1})])]),_:1},512)):_("",!0)])],2)):_("",!0)])}}}),Un={class:"kanban-main-wrapper d-flex gap-4 h-100"},Rn={class:"add-new-form text-no-wrap",style:{"inline-size":"10rem"}},Mn=N("span",null,"Add New",-1),Hn={class:"mb-4"},Zn={class:"d-flex gap-3"},Wn=q({__name:"KanbanBoard",props:{kanbanData:{},groupName:{default:"kanban"}},emits:["addNewBoard","renameBoard","deleteBoard","addNewItem","editItem","deleteItem","updateItemsState","updateBoardState"],setup(e,{emit:t}){const n=e,a=t,o=w(),l=w(n.kanbanData.boards),r=w(!1),d=w(!1),i=w(),f=w(""),p=w(),k=()=>{var m;(m=i.value)==null||m.validate().then(h=>{h.valid&&(a("addNewBoard",f.value),d.value=!1,f.value="")})},x=m=>{a("deleteBoard",m)},D=m=>{a("renameBoard",m)},z=m=>{a("addNewItem",m)},V=m=>{m&&(p.value=m,r.value=!0)},b=m=>{a("updateItemsState",m)};Oe({parent:o,values:l,dragHandle:".drag-handler",plugins:[Ce()]}),W(n,()=>{l.value=n.kanbanData.boards,fe(o.value)},{deep:!0});const A=m=>{a("editItem",m)},O=m=>{a("deleteItem",m)};W(l,()=>{const m=l.value.map(h=>h.id);a("updateBoardState",m)},{deep:!0});const Z=()=>n.kanbanData.boards.some(m=>f.value&&m.title.toLowerCase()===f.value.toLowerCase())?"Board title already exists":!0,v=()=>{var m;d.value=!1,(m=i.value)==null||m.reset()};return ie(i,v),(m,h)=>{const re=ve;return y(),C(Y,null,[N("div",Un,[N("div",{ref_key:"kanbanWrapper",ref:o,class:"d-flex ga-6 pt-1"},[(y(!0),C(Y,null,ee(u(l),T=>(y(),P(Kn,{key:T.id,"group-name":m.groupName,"kanban-ids":T.itemsIds,"board-name":T.title,"board-id":T.id,"kanban-items":m.kanbanData.items,"kanban-data":m.kanbanData,onDeleteBoard:x,onRenameBoard:D,onAddNewItem:z,onEditItem:V,onUpdateItemsState:b,onDeleteItem:O},null,8,["group-name","kanban-ids","board-name","board-id","kanban-items","kanban-data"]))),128))],512),N("div",Rn,[N("h5",{class:"text-h5 cursor-pointer d-flex align-center gap-2",onClick:h[0]||(h[0]=T=>d.value=!u(d))},[c(I,{size:"18",icon:"bx-plus"}),Mn]),u(d)?(y(),P(u(te),{key:0,ref_key:"refAddNewBoard",ref:i,class:"mt-4","validate-on":"submit",onSubmit:X(k,["prevent"])},{default:g(()=>[N("div",Hn,[c(re,{modelValue:u(f),"onUpdate:modelValue":h[1]||(h[1]=T=>J(f)?f.value=T:null),rules:["requiredValidator"in m?m.requiredValidator:u(Q),Z],autofocus:"",placeholder:"Add Board Title",onKeydown:G(v,["esc"])},null,8,["modelValue","rules"])]),N("div",Zn,[c(U,{size:"small",type:"submit"},{default:g(()=>[B(" Add ")]),_:1}),c(U,{size:"small",variant:"tonal",color:"secondary",type:"reset",onClick:v},{default:g(()=>[B(" Cancel ")]),_:1})])]),_:1},512)):_("",!0)])]),c(vn,{"is-drawer-open":u(r),"onUpdate:isDrawerOpen":h[2]||(h[2]=T=>J(r)?r.value=T:null),"kanban-item":u(p),"onUpdate:kanbanItem":A,onDeleteKanbanItem:O},null,8,["is-drawer-open","kanban-item"])],64)}}}),Ua=q({__name:"index",async setup(e){let t,n;const{data:a,execute:o}=([t,n]=je(()=>yt("/apps/kanban")),t=await t,n(),t),l=async D=>{await F("/apps/kanban/board/add",{method:"POST",body:{title:D}}),o()},r=async D=>{await F(`/apps/kanban/board/${D}`,{method:"DELETE"}),o()},d=async D=>{await F("/apps/kanban/board/rename",{method:"PUT",body:D}),o()},i=async D=>{await F("/apps/kanban/item/add",{method:"POST",body:D}),o()},f=async D=>{await F("/apps/kanban/item/update",{method:"PUT",body:D}),o()},p=async D=>{D.item&&D.item.id&&(await F(`/apps/kanban/item/${D.item.id}`,{method:"DELETE",body:D}),o())},k=async D=>{await F("/apps/kanban/item/state-update",{method:"PUT",body:D})},x=async D=>{await F("/apps/kanban/board/state-update",{method:"PUT",body:D})};return(D,z)=>u(a)?(y(),P(Wn,{key:0,"kanban-data":u(a),onAddNewBoard:l,onDeleteBoard:r,onRenameBoard:d,onAddNewItem:i,onEditItem:f,onDeleteItem:p,onUpdateItemsState:k,onUpdateBoardState:x},null,8,["kanban-data"])):_("",!0)}});export{Ua as default};
